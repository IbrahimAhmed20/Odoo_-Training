
<odoo>
    <!-- CRM Lead Report Action -->
    <record id="action_report_crm_lead" model="ir.actions.report">
        <field name="name">CRM Leads by Next Date</field>
        <field name="model">crm.lead</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">crm_custom.report_crm_lead_template</field>
        <field name="report_file">crm_custom.report_crm_lead_template</field>
        <field name="binding_model_id" ref="model_crm_lead"/>
        <field name="binding_type">report</field>
    </record>

    <!-- CRM Lead Report Template -->
    <template id="report_crm_lead_template">
        <!-- Call external layout for consistency across reports -->
        <t t-call="web.external_layout">
            <main>
                <div class="page">
                    <h2>CRM Lead Report</h2>
                    <!-- Loop through all documents (leads) passed to the template -->
                    <t t-foreach="docs" t-as="doc">
                        <div style="margin-bottom: 20px; border-bottom: 1px solid #ccc; padding-bottom: 10px;">
                            <!-- Display lead details -->
                            <p><strong>Lead Name:</strong> <t t-esc="doc.name"/></p>
                            <p><strong>Customer:</strong> <t t-esc="doc.partner_id.name or 'No Customer'"/></p>
                            <p><strong>Next Call Date:</strong> <t t-esc="doc.next_call_date or 'No Date Set'"/></p>
                            <p><strong>Salesperson:</strong> <t t-esc="doc.user_id.name or 'Unassigned'"/></p>
                            <p><strong>Stage:</strong> <t t-esc="doc.stage_id.name or 'No Stage'"/></p>
                            <p><strong>User Test:</strong> <t t-esc="doc.user_test or 'No User Test'"/></p>
                            <p><strong>Lead Source:</strong> <t t-esc="doc.source_id.name or 'No Source'"/></p>
                            <p><strong>Lead Description:</strong> <t t-esc="doc.description or 'No Description'"/></p>
                            <p><strong>Create Date:</strong> <t t-esc="doc.create_date or 'No Create Date'"/></p>
                        </div>
                    </t>
                </div>
            </main>
        </t>
    </template>
</odoo>
